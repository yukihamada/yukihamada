

# ライトボックスギャラリー機能 & ブログ一覧ページデザイン改善計画

## 概要

2つの機能強化を実装します：
1. **ライトボックスのスワイプギャラリー機能**: 記事内の画像間をスワイプ/矢印キーで移動可能に
2. **ブログ一覧ページのデザイン改善**: より視覚的に魅力的なカードデザインとレイアウトへ

---

## 機能1: ライトボックスギャラリー機能

### 現状の課題
- 現在のライトボックス (`ImageLightbox.tsx`) は単一画像のみ表示
- 記事内に複数画像がある場合、一旦閉じて別の画像を開く必要がある
- スワイプやキーボードナビゲーションが未対応

### 改善内容

#### 1.1 新しい `ImageGalleryLightbox.tsx` コンポーネント

```text
┌─────────────────────────────────────────────────────────────┐
│  [X]                                              1 / 4     │
│                                                             │
│  [<]                 [  画像  ]                     [>]     │
│                                                             │
│                     キャプション                            │
│                                                             │
│           ● ○ ○ ○  (ドットインジケーター)                  │
└─────────────────────────────────────────────────────────────┘
```

**機能**:
- **スワイプ対応**: Embla Carousel (`useEmblaCarousel`) を使用したタッチ/マウスドラッグ操作
- **矢印ボタン**: 左右ナビゲーションボタン（画面端に配置）
- **キーボードナビゲーション**: 
  - `←` / `→`: 前後の画像へ移動
  - `Escape`: ライトボックスを閉じる
- **画像カウンター**: 現在位置表示 (例: "2 / 5")
- **ドットインジケーター**: 画像の総数と現在位置を視覚的に表示
- **アニメーション**: Framer Motion でフェードイン/アウト

#### 1.2 BlogPost.tsx の更新

| 変更箇所 | 内容 |
|---------|------|
| State変更 | `lightboxImage` → `{ images: Array, currentIndex: number }` |
| 画像クリック時 | 記事内全画像を収集し、クリックした画像のインデックスで開く |
| Import | `ImageLightbox` → `ImageGalleryLightbox` に置き換え |

#### 1.3 技術詳細

**画像収集ロジック**:
```typescript
// contentRef内の全ライトボックス対応画像を収集
const allImages = Array.from(
  contentRef.current.querySelectorAll('[data-lightbox-image]')
).map(el => ({
  src: el.getAttribute('data-lightbox-image'),
  alt: el.getAttribute('data-lightbox-alt')
}));
```

**Embla Carousel統合**:
- 既存の `embla-carousel-react` パッケージを活用（インストール済み）
- `loop: true` オプションで無限ループ可能
- `draggable: true` でスワイプ対応

---

## 機能2: ブログ一覧ページデザイン改善

### 現状の課題
- カードデザインがシンプルすぎる
- フィーチャー記事の差別化が弱い
- 視覚的な深み・プレミアム感が不足

### 改善内容

#### 2.1 フィーチャー記事（Hero Card）

最新または featured フラグ付き記事を大きく目立たせるヒーローカードを追加：

```text
┌─────────────────────────────────────────────────────────────┐
│                                                             │
│  [Featured]  カテゴリー                                     │
│                                                             │
│  記事タイトル（大きく）                                      │
│                                                             │
│  概要文...                                                  │
│                                                             │
│  📅 日付   ⏱ 読了時間   👁 閲覧数                          │
│                                                     [→]     │
└─────────────────────────────────────────────────────────────┘
```

#### 2.2 通常カードのデザイン強化

| 要素 | 改善内容 |
|------|---------|
| **画像オーバーレイ** | ホバー時にグラデーションオーバーレイ + 矢印アイコン |
| **Glassmorphismの強化** | `.glass-premium` クラスを活用した深みのあるカード |
| **カテゴリーバッジ** | より目立つグラデーション背景バッジ |
| **メタ情報の整理** | アイコン + テキストのアライメント改善 |
| **ホバーエフェクト** | カード全体のグロー + 画像ズーム効果の強化 |

#### 2.3 レイアウト構成

**デスクトップ**:
```text
┌────────────────────────────┬─────────────────┬─────────────────┐
│                            │   カード 2      │   カード 3      │
│   フィーチャー記事         ├─────────────────┼─────────────────┤
│   （2列分の大きさ）        │   カード 4      │   カード 5      │
│                            │                 │                 │
└────────────────────────────┴─────────────────┴─────────────────┘
         2 columns                  1 col            1 col
```

**モバイル**: 全て1列の縦並び（フィーチャー記事のみ大きく表示）

#### 2.4 追加CSSスタイル

```css
/* ブログカード強化 */
.blog-card-premium {
  background: linear-gradient(145deg, 
    hsl(var(--card)) 0%, 
    hsl(var(--card) / 0.7) 100%);
  box-shadow: 
    0 10px 40px -10px hsl(var(--primary) / 0.15),
    inset 0 1px 0 hsl(var(--border) / 0.3);
}

.blog-card-premium:hover {
  box-shadow: 
    0 20px 60px -15px hsl(var(--primary) / 0.25),
    inset 0 1px 0 hsl(var(--primary) / 0.3);
}

/* 画像オーバーレイ */
.blog-image-overlay {
  background: linear-gradient(
    to bottom,
    transparent 40%,
    hsl(var(--background) / 0.9) 100%
  );
}
```

---

## 実装ファイル

| ファイル | 変更内容 |
|---------|---------|
| `src/components/ImageGalleryLightbox.tsx` | 新規作成 - ギャラリー対応ライトボックス |
| `src/components/ImageLightbox.tsx` | 削除（新コンポーネントに統合） |
| `src/pages/BlogPost.tsx` | ライトボックスロジック更新、新コンポーネントimport |
| `src/pages/Blog.tsx` | レイアウト改善、フィーチャーカード追加、カードデザイン強化 |
| `src/index.css` | ブログカード用の新CSSクラス追加 |

---

## 期待される効果

1. **UX向上**: 記事内の複数画像を閉じずにスワイプで閲覧可能
2. **モバイル最適化**: タッチスワイプでの直感的な操作
3. **視覚的魅力**: プレミアム感のあるブログカードで読者の興味を引く
4. **一貫したデザイン言語**: サイト全体の「Glassmorphism 2.0」に沿った統一感

